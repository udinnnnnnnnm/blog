!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@ali/wpk-reporter")):"function"==typeof define&&define.amd?define(["exports","@ali/wpk-reporter"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).iLogger={},e.wpkReporter)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=n(t);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(e){c=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw r}}return i}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var u=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e?null:{},o=document.cookie?document.cookie.split("; "):[],r=/(%[0-9A-Z]{2})+/g,i=0;i<o.length;i++){var a=o[i].split("="),c=a.slice(1).join("=");t.json||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=a[0].replace(r,decodeURIComponent);if(c=c.replace(r,decodeURIComponent),t.json)try{c=JSON.parse(c)}catch(e){}if(e===l){n=c;break}e||(n[l]=c)}catch(e){}}return n},p={ID:{id:"360",lang:["id","en"],langShort:["id","en"],currency:"IDR",domain:"lazada.co.id",regionID:"ID"},MY:{id:"458",currency:"MYR",lang:["en-MY","ms","zh"],langShort:["en","ms","zh"],domain:"lazada.com.my",regionID:"MY"},PH:{id:"608",currency:"PHP",lang:["en-PH"],langShort:["en"],domain:"lazada.com.ph",regionID:"PH"},SG:{id:"702",currency:"SGD",lang:["en-SG","zh"],langShort:["en","zh"],domain:"lazada.sg",regionID:"SG"},TH:{id:"764",currency:"THB",lang:["th","en"],domain:"lazada.co.th",regionID:"TH"},VN:{id:"704",currency:"VND",lang:["vi","en"],domain:"lazada.vn",regionID:"VN"}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e;if(e.includes("?")){var o=e.split("?"),r=l(o,2),i=r[1];n=void 0===i?"":i}if(n.includes("#")){var a=n.split("#"),c=l(a,1),s=c[0];n=void 0===s?"":s}for(var d=n.split("&"),u={};d.length;){var p=d.shift(),f=p.split("="),g=l(f,2),w=g[0],m=void 0===w?"":w,h=g[1],v=void 0===h?"":h;m&&(u[m]=t?decodeURIComponent(v):v)}return u},g=navigator.userAgent||"",w=f();function m(e){return e?e.split("|"):[]}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e=e.toLocaleUpperCase();var n=p[e]?p[e].lang:[];if(!Array.isArray(n))return t;for(var o="",r=0;r<n.length;r++){var i=n[r];if(i&&i.indexOf(t)>-1){o=i;break}}return o||(o=n[0]),o}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function v(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var y=function(){var e=[],t=screen.width*screen.height,n=null,o=!1,r=!1,i=["SCRIPT","LINK","SVG","IMG","VIDEO"],a=[];function c(e){var t=[];y(e,(function(e){y(e.addedNodes,(function(e){1===e.nodeType&&t.push(e)}))})),t.length>0&&g(t.concat([]))}var l=null;function s(e){o||(r=!0,n&&clearTimeout(n),l.disconnect(),l.takeRecords(),setTimeout((function(){o=!0,h(e)}),1e3))}var d=function(){};function u(t,n){var o=0===e.length,r=screen.width,i=screen.height,a=document.documentElement,c=a?Math.min(a.clientHeight,i):i,l=a?Math.min(a.clientWidth,r):r,s=t.left+t.width,d=t.top+t.height,u=Math.round(.02*Math.min(r,i)),p=Math.round(.05*i);return o?t.width>=n||t.height>=n?u:s>=u&&l-t.left>=u&&d>=p&&c-t.top>=p:t.width>=2*u&&t.height>=2*u&&s>=p&&l-t.left>=p&&d>=p&&c-t.top>2*p}function p(e,t,n){var o=n||0;return y(e,(function(e){o=t(e,o)})),o}function f(e){var t=function(){e.lastTime=Math.max(v(),e.lastTime),e.c=document.getElementsByTagName("*").length,w()};window.requestAnimationFrame?requestAnimationFrame(t):setTimeout(t,0)}function g(n){var r=v(),c={createTime:r,lastTime:r,wait:0,piece:[],v:0,c:document.getElementsByTagName("*").length};y(n,(function(e){(function(e){for(var t=a.length,n=null,o=0;o<t;o++)if((n=a[o])&&n.contains&&n.contains(e))return!0;return!!e.hasAttribute("ignoreFspCollection")&&(a.push(e),!0)})(e)||function(e,n,r){var a=e.piece,c=document.documentElement.scrollTop||window.pageYOffset||document.body&&document.body.scrollTop||0,l=document.documentElement.scrollLeft||window.pageXOffset||document.body&&document.body.scrollLeft||0,s=r?null:n.getBoundingClientRect(),d=r||{type:0,className:"",top:s.top+c,left:s.left+l,width:s.width,height:s.height},g=n.offsetParent;g&&g.offsetWidth<g.scrollWidth&&(d.width=Math.min(g.offsetWidth,d.width)),g&&g.offsetHeight<g.scrollHeight&&(d.height=Math.min(g.offsetHeight,d.height));var m=n.tagName;if(-1!=i.indexOf(m.toUpperCase())&&"IMG"==m){var h=0;d.width=Math.max(d.width,1),d.height=Math.max(d.height,1),d.type=1,u(d)&&(e.wait+=1,n.addEventListener("load",(function r(){if(o)n.removeEventListener("load",r,!0);else{h++,e.wait-=1;var i=n.getBoundingClientRect(),a=v();u(d,!0)&&(h<=1||a<=1e3)?(d.width=i.width,d.height=i.height,e.lastTime=Math.max(a,e.lastTime),d.size=i.width*i.height,d.v=d.size/t,e.v=p(e.piece,(function(e,t){return e.v+t}),0),f(e)):w()}}),!0),n.addEventListener("error",(function t(){o?n.removeEventListener("error",t,!0):(e.wait-=1,u(d)?(e.lastTime=Math.max(v(),e.lastTime),0===e.wait&&(e.v=p(e.piece,(function(e,t){return e.v+t}),0),f(e))):w())}),!0))}var y={};if(window.getComputedStyle&&("none"===(y=window.getComputedStyle(n,null)).display||"fixed"===y.position))return a;if(u(d)){var _=y.backgroundImage||"",b=/url\(['"]?(.*?)['"]?\)/i;if(b.test(_)&&(_=_.replace(b,"$1"),!/^data:/i.test(_))){e.wait+=1;var T=document.createElement("img");T.onload=function(){e.wait-=1,e.lastTime=Math.max(v(),e.lastTime),0===e.wait&&f(e)},T.src=_}(function(e,t){var n=null;for(var o in e)if(n=e[o],t.top>=n.top&&t.left>=n.left&&t.top+t.height<=n.top+n.height&&t.left+t.width<=n.left+n.width)return!0;return!1})(a,d)||(d.size=d.width*d.height,d.v=d.size/t,e.v+=d.v,d.size&&a.push(d))}}(c,e)})),c.piece.length>0&&(e.push(c),f(c))}function w(){if(!r&&!o){n&&clearTimeout(n),n=setTimeout((function(){s()}),3e3);for(var t=null,i=null,a=0,c=0,l=0,d=0,u=0,p=e.length-1;p>1;p--){if(t=e[p],i=e[p-1],d=Math.floor(100*t.v)/100,c=(u=Math.floor(100*i.v)/100)?Math.abs(d-u)/u:0,(l+=Math.min(t.v,1))>4){s();break}if(c<.5){if(++a>6){s();break}}else a>0&&(a=0)}}}var m=0;function h(t){t&&(o=!0);var n=e.length;if(0!==n){var r=[],i=[],a=[],c=-1,l=0,u=0,p=0;for(p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,o=e.length-1,r=0;do{var i=e[o],a=e[o-1];if(!(Math.abs(i-a)/i<t))break;r++,o--}while(o>0);return r>=n&&o>0?Math.min(o,e.length-1):e.length-1}(e.map((function(e){return Math.floor(100*e.v)/100}))),i=p>0?e.slice(0,n+2):e;i.length>0;)if(c=i[0].lastTime,l=i[0].c,a=[],u=0,p=0,y(i,(function(e){u+=e.v,p++,e.createTime<=c+200&&(c=Math.max(c,e.lastTime),l=Math.max(l,e.c)),e.lastTime>c&&a.push(e)})),i=a,u<.02||u/p<.01?m++:m=0,r.push([c,l]),m>=3){r.splice(r.length-3),s();break}var f=r.length-1;0!==m&&f>=m&&(f-=m),f=r[f];var g=null,w=null;l=null;try{f&&(g=f[0],l=f[1],function(e,t,n){if(!window.dispatchEvent||!window.CustomEvent)return;var o=new CustomEvent("jstracker.fsp",{detail:{cost:t,timestamp:e,domSize:n}});window.dispatchEvent(o)}(w=performance.timing.navigationStart+g,g,l)),d&&d(w,g,l)}catch(e){}}}function v(){return performance.now()}function y(e,t){if(Array.prototype.forEach)Array.prototype.forEach.call(e,t);else for(var n=e.length,o=0;o<n;o++)t(e[o],o)}return{install:function(){window.performance&&window.MutationObserver&&((l=new MutationObserver(c)).observe(document.documentElement,{childList:!0,subtree:!0}),g(document.querySelectorAll("BODY > *")),setTimeout((function(){s(!0)}),3e4))},onReport:function(e){e&&"function"==typeof e&&(d=e)},forceStop:function(){h(!0)}}}(),_=y,b=!1;function T(){if(!b){var e=function(e){var t=e.name,n=e.responseStart,r=e.fetchStart,i=e.domainLookupEnd,a=e.domainLookupStart,c=e.requestStart,l=e.responseEnd,s=e.connectEnd,d=e.connectStart,u=e.transferSize,p=e.decodedBodySize;try{var f={category:204,msg:new URL(t).hostname,wl_avgv1:n-r,wl_avgv2:i-a,wl_avgv3:s-d,wl_avgv4:n-c,wl_avgv5:l-n,wl_avgv6:l-r,wl_avgv7:u,wl_avgv8:p,c1:t,bl_1:o,sampleRate:.01};n>0&&window.__wpk.report(f)}catch(e){}},t=function(t){window.requestIdleCallback?window.requestIdleCallback((function(){e(t)})):setTimeout((function(){e(t)}),0)},n=function(e){e.filter((function(e){var t=e.initiatorType,n="css"===t&&e.name.endsWith(".css");return"script"===t||n})).forEach(t)};if(b=!0,!window.__wpk)return;var o=new URL(location.href).searchParams.get("wh_pid")||location.pathname;if(console.log("[lzd-h5-itrace] init asset perf monitor"),window.performance&&window.PerformanceObserver){var r="resource",i=window.performance.getEntriesByType(r);n(i),new PerformanceObserver((function(e){n(e.getEntries())})).observe({entryTypes:[r]})}}}var O={exports:{}};!function(e,t){e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==a(e)&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports={sdk:{BID:"wpkreporter",CID:"jssdk",WID_KEY:"__wpkreporterwid_"},env:{BROWSER:"browser",NODEJS:"nodejs",WEEX:"weex"},px:{signKey:"Uvn#08uefVdwe&c4",addr:{cn:"http://px.effirst.com/api/v1/jssdk/upload",cn_https:"https://px.effirst.com/api/v1/jssdk/upload",intl:"http://px-intl.ucweb.com/api/v1/jssdk/upload",intl_https:"https://px-intl.ucweb.com/api/v1/jssdk/upload",qg:"http://px-itrace.xuexi.cn/api/v1/jssdk/upload",qg_https:"https://px-itrace.xuexi.cn/api/v1/jssdk/upload"},confAddr:{cn:"http://px.effirst.com/api/v1/jconfig",cn_https:"https://px.effirst.com/api/v1/jconfig",intl:"http://px-intl.ucweb.com/api/v1/jconfig",intl_https:"https://px-intl.ucweb.com/api/v1/jconfig",qg:"http://px-itrace.xuexi.cn/api/v1/jconfig",qg_https:"https://px-itrace.xuexi.cn/api/v1/jconfig"}},http:{methods:{GET:"GET",PUT:"PUT",POST:"POST",HEAD:"HEAD",DELETE:"DELETE",OPTIONS:"OPTIONS",CONNECT:"OPTIONS",TRACE:"OPTIONS",PATCH:"OPTIONS"},protocols:{HTTP:"http:",HTTPS:"https:"}},category:{JSERR:1,API:2,JSFSPERF:3,RESLOADFAIL:4,FLOW:5,BKPG:6,HARLOG:7,PERFNEXT:1e3,MAINDOC:1e5,RESTIMING:100001},navConn:{types:{BLUETOOTH:"bluetooth",CELLULAR:"cellular",ETHERNET:"ethernet",MIXED:"mixed",NONE:"none",OTHER:"other",UNKNOWN:"unknown",WIFI:"wifi",WIMAX:"wimax"},effectiveTypes:{"2G":"2g","3G":"3g","4G":"4g",SLOW2G:"slow-2g"}}}},,,function(e,t,n){var o=n(0).env,r=function(e){var t;return(e&&(t=e.replace(/^#\/?/,""))&&"string"==typeof t?t.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):"")||"[index]"},i=function(e,t){if(t=t||{},e.env===o.BROWSER&&window)if(e.toolKit.extend({enable:!0},t).enable){e.logger.info("wpkflowPlugin已开启");var i,a,c=function(){e.reportFlow()};"complete"===document.readyState?setTimeout(c,0):e.toolKit.onListen(window,"load",c,!0),e.spa&&(n(4)(),i=function(t){r(location.hash)&&(e._begin=Date.now(),e._sid=e.toolKit.uuid(),e.reportFlow())},a=function(t){r(t.detail)&&(e._begin=Date.now(),e._sid=e.toolKit.uuid(),e.reportFlow())},e.toolKit.onListen(window,"hashchange",i),e.toolKit.onListen(window,"historystatechange",a)),e.toolKit.onListen(window,"beforeunload",(function(){e.toolKit.offListen(window,"load"),e.toolKit.offListen(window,"hashchange"),e.toolKit.offListen(window,"historystatechange"),c=i=a=null}))}else e.logger.info("wpkflowPlugin已关闭")};i.prototype.pluginId="flow",e.exports=i},function(e,t){var n=window.history||{},o=window.document,r=function(e,t){var n;window.CustomEvent?n=new CustomEvent(e,{detail:t}):((n=o.createEvent("HTMLEvents")).initEvent(e,!1,!0),n.detail=t),window.dispatchEvent(n)},i=function(e){return e&&"string"==typeof e?e.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):""},a=function(e){var t=n[e];"function"==typeof t&&(n[e]=function(e,o,a){var c=location.href,l=t.call(n,e,o,a);if(!a||"string"!=typeof a)return l;if(a===c)return l;try{var s=c.split("#"),d=a.split("#"),u=i(s[0]),p=i(d[0]),f=s[1]&&s[1].replace(/^\/?(.*)/,"$1"),g=d[1]&&d[1].replace(/^\/?(.*)/,"$1");u!==p?r("historystatechange",p):f!==g&&r("historystatechange",g)}catch(e){}return l},n[e].toString=e+"() { [native code] }")};e.exports=function(){a("pushState"),a("replateState")}}])}(O);var E=v(O.exports),x={exports:{}};!function(e,t){e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==a(e)&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}({0:function(e,t){e.exports={sdk:{BID:"wpkreporter",CID:"jssdk",WID_KEY:"__wpkreporterwid_"},env:{BROWSER:"browser",NODEJS:"nodejs",WEEX:"weex"},px:{signKey:"Uvn#08uefVdwe&c4",addr:{cn:"http://px.effirst.com/api/v1/jssdk/upload",cn_https:"https://px.effirst.com/api/v1/jssdk/upload",intl:"http://px-intl.ucweb.com/api/v1/jssdk/upload",intl_https:"https://px-intl.ucweb.com/api/v1/jssdk/upload",qg:"http://px-itrace.xuexi.cn/api/v1/jssdk/upload",qg_https:"https://px-itrace.xuexi.cn/api/v1/jssdk/upload"},confAddr:{cn:"http://px.effirst.com/api/v1/jconfig",cn_https:"https://px.effirst.com/api/v1/jconfig",intl:"http://px-intl.ucweb.com/api/v1/jconfig",intl_https:"https://px-intl.ucweb.com/api/v1/jconfig",qg:"http://px-itrace.xuexi.cn/api/v1/jconfig",qg_https:"https://px-itrace.xuexi.cn/api/v1/jconfig"}},http:{methods:{GET:"GET",PUT:"PUT",POST:"POST",HEAD:"HEAD",DELETE:"DELETE",OPTIONS:"OPTIONS",CONNECT:"OPTIONS",TRACE:"OPTIONS",PATCH:"OPTIONS"},protocols:{HTTP:"http:",HTTPS:"https:"}},category:{JSERR:1,API:2,JSFSPERF:3,RESLOADFAIL:4,FLOW:5,BKPG:6,HARLOG:7,PERFNEXT:1e3,MAINDOC:1e5,RESTIMING:100001},navConn:{types:{BLUETOOTH:"bluetooth",CELLULAR:"cellular",ETHERNET:"ethernet",MIXED:"mixed",NONE:"none",OTHER:"other",UNKNOWN:"unknown",WIFI:"wifi",WIMAX:"wimax"},effectiveTypes:{"2G":"2g","3G":"3g","4G":"4g",SLOW2G:"slow-2g"}}}},6:function(e,t,n){var o=n(0),r=o.sdk,i=o.http.methods,a=o.category,c=function(e){return e>=200&&e<=299},l=function(e){return-1===e.indexOf("//arms-retcode")&&-1===e.indexOf("//retcode.taobao.com")&&-1===e.indexOf("aliyuncs.com/r.png")&&-1===e.indexOf("//mdap.alipay.com/loggw")&&-1===e.indexOf("//wpk-gateway")&&-1===e.indexOf("//px.ucweb.com")&&-1===e.indexOf("//px.effirst.com")&&-1===e.indexOf("//px-intl.ucweb.com")&&-1===e.indexOf("//gm.mmstat.com/arms.1.1")&&-1===e.indexOf("//gm.mmstat.com/arms.1.2")&&-1===e.indexOf("//g.alicdn.com/alilog")},s=function(e,t){if(e.hasOwnProperty(t))return e[t]},d=function(e,t,n){e.toolKit.isObject(n)&&e.toolKit.extend(t,{c1:s(n,"c1"),c2:s(n,"c2"),c3:s(n,"c3"),c4:s(n,"c4"),c5:s(n,"c5"),bl1:s(n,"bl1"),bl2:s(n,"bl2"),bl3:s(n,"bl3"),bl4:s(n,"bl4"),bl5:s(n,"bl5")}),e.report(t)};function u(e,t){var n=null;try{var o,r,i,a=e.toolKit.trim(t||"").split(/[\r\n]+/);a.length>0&&(n={},e.toolKit.forEach(a,(function(e){o=e.split(": "),r=o.shift(),i=o.join(": "),n[r]=i})))}catch(e){}return n}function p(e){try{if(!e)return{};var t={};return e.forEach((function(e,n){t[n]=e})),t}catch(e){return{}}}var f=function(e,t){if(e.env===o.env.BROWSER&&window){var n=e.toolKit.extend({enable:!0,sampleRate:1},t);n.enable?(e.logger.info("wpkinterfacePlugin已开启"),"XMLHttpRequest"in window&&function(e,t){var n=window.XMLHttpRequest.prototype,o=n.open;n.open=function(e,t){this.__reqCtx__={method:e,url:t||"",start:Date.now()};var n=[].slice.call(arguments);o.apply(this,n)};var s=n.setRequestHeader;n.setRequestHeader=function(e,t){var n=[].slice.call(arguments);s.apply(this,n),this.__reqCtx__&&(this.__reqCtx__.headers||(this.__reqCtx__.headers={}),this.__reqCtx__.headers[e]=t)};var p=n.send;n.send=function(n){var o=this;function s(){if(o.__reqCtx__&&4===o.readyState)try{var s=Date.now(),p=(o.responseURL||o.__reqCtx__.url).split("?"),f=p[0],g=p[1]||"",w="",m=o.__reqCtx__.headers||{};o.__reqCtx__.method.toUpperCase()!==i.GET&&n&&(w=JSON.stringify(n));var h=u(e,o.getAllResponseHeaders()),v=String(o.response),y=!0,_={};"function"==typeof t.errorFilter&&(y=!!(_=t.errorFilter.call(this,{url:f,status:o.status,response:v,body:w,queryString:g,reqHeaders:m,resHeaders:h})),e.logger.warn("api errorFilter执行结果：",_)),v.length>2048&&(v="[response content too large]");var b=s-o.__reqCtx__.start;if(y&&b<121e3&&l(f)){var T=_.bizCode||o.status,O={category:a.API,sampleRate:t.sampleRate,w_res:f,w_param:g,w_body:c(T)||!t.withBody?"":w,w_method:o.__reqCtx__.method,w_rc:T,w_rt:b,w_resp:c(T)||!t.withResp?"":_.resp||v,msg:_.msg||"",w_type:16};d(e,O,_)}}catch(t){e.reportError(t,{bid:r.BID,cid:r.CID,category:a.JSERR,sampleRate:1})}}if("onreadystatechange"in o&&"function"==typeof o.onreadystatechange){var f=o.onreadystatechange;o.onreadystatechange=function(){var e=[].slice.call(arguments);s.apply(this,e),f.apply(this,e)}}else o.onreadystatechange=s;var g=[].slice.call(arguments);return p.apply(this,g)}}(e,n),"fetch"in window&&function(e,t){var n=window.fetch;window.fetch=function(){var o=[].slice.call(arguments),s=i.GET;o[1]&&o[1].method&&(s=o[1].method.toUpperCase());var u=Date.now();return n.apply(this,o).then((function(n){try{var f=Date.now(),g=(n.url||o[0]).split("?"),w=g[0],m=g[1]||"",h="",v=null;o[1]&&(v=o[1].headers),s!==i.GET&&o[1]&&o[1].body&&(h=JSON.stringify(o[1].body));var y=n.clone(),_=p(y.headers);y.text().then((function(o){o=o||"";var r=!0,i={};if("function"==typeof t.errorFilter&&(r=!!(i=t.errorFilter.call(this,{url:w,status:n.status,response:o,body:h,queryString:m,reqHeaders:v,resHeaders:_})),e.logger.warn("api errorFilter执行结果：",i)),o=o.length>2048?"[response content too large]":o,r&&f-u<121e3&&l(w)){var p=i.bizCode||n.status,g={category:a.API,sampleRate:t.sampleRate,w_res:w,w_param:m,w_body:c(p)||!t.withBody?"":h,w_method:s,w_rc:p,w_rt:f-u,w_resp:c(p)||!t.withResp?"":i.resp||o,msg:i.msg||"",w_type:16};d(e,g,i)}}))}catch(t){e.reportError(t,{bid:r.BID,cid:r.CID,category:a.JSERR,sampleRate:1})}return n})).catch((function(e){throw e}))}}(e,n),(e.enableMtop||n.enableMtop)&&(e.logger.info("use mtop"),function(e,t){window&&window.lib.mtop&&window.lib.mtop.middlewares&&window.lib.mtop.middlewares.push((function(n){var o=this.params,i=this.options,s=Date.now();return n().then((function(){try{if(i.H5Request&&(i.getJSON||i.postJSON))return void e.logger.debug("识别到请求为xhr, api监控交由xhr的方式处理");var n,u=i.retJson||{},p=Date.now()-s,f=u.code||200,g=o.type,w=o.api,m=e.toolKit.objToQueryString(i.querystring),h=i.postdata&&i.postdata.data?e.toolKit.objToJsonString(i.postdata.data):null,v=e.toolKit.objToJsonString(u.data||{}),y=u.ret;y instanceof Array&&(y=y.join(",")),-1===y.indexOf("SUCCESS")&&(n=y);var _=!0,b={};if("function"==typeof t.errorFilter&&(_=!!(b=t.errorFilter.call(this,{url:w,status:f,response:v,body:h,queryString:m,msg:n})),e.logger.warn("api errorFilter执行结果：",b)),_&&p<121e3&&l(w)){var T=b.bizCode||f,O={category:a.API,sampleRate:t.sampleRate,w_res:w,w_param:m,w_body:c(T)||!t.withBody?"":h,w_method:g,w_rc:T,w_rt:p,w_resp:c(T)||!t.withResp?"":b.resp||v,msg:b.msg||n||"",w_type:16};d(e,O,b)}}catch(t){e.reportError(t,{bid:r.BID,cid:r.CID,category:a.JSERR,sampleRate:1})}}))}))}(e,n))):e.logger.info("wpkinterfacePlugin已关闭")}};f.prototype.pluginId="api",e.exports=f}})}(x);var S=v(x.exports),P={exports:{}};!function(e,t){e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==a(e)&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports={sdk:{BID:"wpkreporter",CID:"jssdk",WID_KEY:"__wpkreporterwid_"},env:{BROWSER:"browser",NODEJS:"nodejs",WEEX:"weex"},px:{signKey:"Uvn#08uefVdwe&c4",addr:{cn:"http://px.effirst.com/api/v1/jssdk/upload",cn_https:"https://px.effirst.com/api/v1/jssdk/upload",intl:"http://px-intl.ucweb.com/api/v1/jssdk/upload",intl_https:"https://px-intl.ucweb.com/api/v1/jssdk/upload",qg:"http://px-itrace.xuexi.cn/api/v1/jssdk/upload",qg_https:"https://px-itrace.xuexi.cn/api/v1/jssdk/upload"},confAddr:{cn:"http://px.effirst.com/api/v1/jconfig",cn_https:"https://px.effirst.com/api/v1/jconfig",intl:"http://px-intl.ucweb.com/api/v1/jconfig",intl_https:"https://px-intl.ucweb.com/api/v1/jconfig",qg:"http://px-itrace.xuexi.cn/api/v1/jconfig",qg_https:"https://px-itrace.xuexi.cn/api/v1/jconfig"}},http:{methods:{GET:"GET",PUT:"PUT",POST:"POST",HEAD:"HEAD",DELETE:"DELETE",OPTIONS:"OPTIONS",CONNECT:"OPTIONS",TRACE:"OPTIONS",PATCH:"OPTIONS"},protocols:{HTTP:"http:",HTTPS:"https:"}},category:{JSERR:1,API:2,JSFSPERF:3,RESLOADFAIL:4,FLOW:5,BKPG:6,HARLOG:7,PERFNEXT:1e3,MAINDOC:1e5,RESTIMING:100001},navConn:{types:{BLUETOOTH:"bluetooth",CELLULAR:"cellular",ETHERNET:"ethernet",MIXED:"mixed",NONE:"none",OTHER:"other",UNKNOWN:"unknown",WIFI:"wifi",WIMAX:"wimax"},effectiveTypes:{"2G":"2g","3G":"3g","4G":"4g",SLOW2G:"slow-2g"}}}},function(e,t,n){var o=n(0),r=function(e,t){if(e.env===o.env.BROWSER&&"undefined"!=typeof window){var n={enable:!0,sampleRate:(t=t||{}).sampleRate||1,rootNode:t.rootNode,ignorePageUrls:t.ignorePageUrls||null,maxDepth:t.maxDepth||8,minElements:t.minElements||10,keyNoteText:t.keyNoteText||[],onloadDuration:t.onloadDuration||8e3,wsDuration:t.wsDuration||3e3,startCheckingTime:t.startCheckingTime||5e3},r=e.toolKit.extend(n,t);if(r.enable){e.logger.info("wpkblankPagePlugin已开启");try{if(e.toolKit.isFunction(r.ignorePageUrls)&&r.ignorePageUrls(location))return void e.logger.info("当前页面在白屏检测的白名单中")}catch(e){}var i=!1;if(r.onloadDuration>0&&"complete"!==document.readyState)var a=setTimeout((function(){i=!0,e.reportBlankPage({w_fp:100,w_wst:r.onloadDuration}),clearTimeout(a)}),r.onloadDuration);var c=function(){clearTimeout(a);try{!i&&r.wsDuration>0&&function(e,t){var n=performance.timing;if("function"==typeof window.PerformanceNavigationTiming)try{var o=performance.getEntriesByType("navigation")[0];o&&(n=o)}catch(e){}if(n)try{n.responseEnd-n.fetchStart>=e&&t()}catch(e){}}(r.wsDuration,(function(){e.reportBlankPage({w_fp:104,w_wst:r.wsDuration})}));var t=setTimeout((function(){!function(e,t){var n,r,i,a,c,l=0,s=0,d=!1,u=[],p=function(e){return 0===e.style.width||0===e.style.height||"none"===e.style.display||0===e.style.opacity||"hidden"===e.style.visibility||"collapse"===e.style.visibility||void 0!==e.type&&"hidden"===e.type},f=function(e){return e&&-1!==["VIDEO","IMG","BUTTON","TEXTAREA","RADIO","CHECKBOX","SELECT","IFRAME","CANVAS","SVG"].indexOf(e.nodeName)},g=function n(o,r){for(var i=Array.prototype.slice.call(o);i.length;){var a=i.shift();r>l&&(l=r),u.push({tag:a.tagName,layer:r,cls:a.className});var c=p(a);if(e.logger.info("depth："+r,a.nodeType,a.tagName,c),!c){if(s++,f(a)){d=!0,e.logger.info("有可见元素，非白屏");break}r<=t.maxDepth&&!p(a)&&a.children.length&&n(a.children,r+1)}}},w=!1;if(r=t.rootNode?"function"==typeof t.rootNode?t.rootNode():t.rootNode:document.body)if(i=r.innerText)a=t.keyNoteText,c=i,e.toolKit.some(a,(function(e){return e===c}))?(w=!0,n=102,e.logger.warn("肯定白屏，命中关键字",i)):(w=!1,d=!0);else{var m=Array.prototype.slice.call(r.children);g(e.toolKit.filter(m,(function(e){return-1===["STYLE","SCRIPT","LINK"].indexOf(e.nodeName)})),1)}else w=!0,n=103,e.logger.warn("白屏，木有body标签或者指定的root节点为空");e.logger.warn("元素数: ",s),e.logger.warn("遍历的最大层级: ",l),e.logger.warn("dsl",u),!w&&!d&&s<t.minElements&&(w=!0,n=101),w&&(e.logger.warn("白屏了",n),e.reportBlankPage({w_fp:n,w_dsl:JSON.stringify(u),w_depth:l,w_domcnt:s}),e.report({category:o.category.MAINDOC,sampleRate:1,bl1:JSON.stringify(document.documentElement.innerHTML),_forcePost:!0}),!e._hasCollectResTiming&&performance&&"function"==typeof performance.getEntriesByType&&(e.report({category:o.category.RESTIMING,bl1:JSON.stringify(performance.getEntriesByType("resource")),bl2:performance.timeOrigin||performance.timing.fetchStart,_forcePost:!0}),e._hasCollectResTiming=!0))}(e,r),clearTimeout(t)}),r.startCheckingTime)}catch(t){e.logger.error("bkpg checking oops: ",t)}};e.toolKit.onListen(window,"load",c,!0),e.toolKit.onListen(window,"beforeunload",(function(){e.toolKit.offListen(window,"load"),c=null}))}else e.logger.info("wpkblankPagePlugin已关闭")}};r.prototype.pluginId="bkpg",e.exports=r}])}(P);var I=v(P.exports);function k(e){return window.__PAGE_NAME?"".concat(window.__PAGE_NAME,"-").concat(e):e}function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"POST";0!==e.indexOf("/")&&(e="/".concat(e));var r=Object.keys(n).map((function(e){return"".concat(e,"=").concat("string"==typeof n[e]?n[e]:JSON.stringify(n[e]))})).join("&");window.goldlog&&window.goldlog.record?window.goldlog.record(e,t,r,"POST"===o?"POST":"GET"):(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.record",arguments:[e,t,r,"POST"===o?"POST":"GET"]})}var L=0,j=0;function N(e,t,n,o){var r=function(e,t){return t||(L=L||performance.timeOrigin,e?e-L:+new Date-L-0)}(e,t),i=+new Date;j=performance.now()||0,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!(window.WindVane||{}).isAvailable)return!1;window.WindVane&&window.WindVane.call("LACustomWVPlugin","reportPerformanceInfo",{webViewType:n,url:location.href,containerType:"object"===a(window.__pha_environment__)?1:0,firstScreenPaint:e,firstScreenPaintTimeStamp:t},(function(){console.log("[component_did_mount_hook] report time to App",e)}),(function(e){console.log("err",e)}))}(r,i),function(e,t,n,o){window.__wpk&&window.__wpk.report&&(window.__wpk.report(Object.assign({category:203,msg:k("componentDidMount"),wl_avgv1:e,c1:e,c2:L,c3:t||"-",c4:0,c5:j},o)),console.log("[component_did_mount_hook] report time to iTrace",e))}(r,i,0,o)}window.__WindVane=window.WindVane||{};var D=function(){window.lzdiTraceLifeCircle=window.lzdiTraceLifeCircle||{},window.lzdiTraceLifeCircle.lzdiTraceShareDidMountTime=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(window.rocket_pre_hot)return null;R("/lzdfe.pageModule.exp","EXP"),N(e,t,0,n)}},C=[/c\.go\-mpulse\.net/,/ds\-aksb\-a\.akamaihd\.net\/RRT/,/s\.akamaihd\.net\/eum\/getdns\.txt/,/pre\-wormhole/],A=["SUCCESS","UNION_NOT_MATCH_FREQUENCY","FAIL_SYS_TOKEN_EMPTY","FAIL_SYS_ILLEGAL_ACCESS","FAIL_SYS_TOKEN_EXOIRED","FAIL_SYS_TOKEN_ILLEGAL"],M={SG:"acs-m.lazada.sg",ID:"acs-m.lazada.co.id",PH:"acs-m.lazada.com.ph",VN:"acs-m.pages.lazada.vn",TH:"acs-m.pages.lazada.co.th",MY:"acs-m.pages.lazada.com.my"};var z=/AliApp/.test(g),H=u("lzd_uid"),q=u("utdid"),F=(navigator.userAgent||"").toLowerCase().indexOf("android")>-1,G="1.0.69",K=!!document.querySelector("meta[name='wpk-bid']"),U=f(),B={},W=!1,J=!1,V=!1,X="";if(K){var Y=document.head.querySelector('meta[name="wpk-bid"]');Y&&Y.getAttribute("content")&&(X=Y.getAttribute("content"))}!K&&F&&console.warn("It is strongly recommended that integrate iTrace UC core monitor to your page, https://yuque.antfin-inc.com/wpk/help/vfx057");var $,Q=!(!($="object"===("undefined"==typeof location?"undefined":a(location))&&location.hostname||"")||!($.indexOf("i.lazada.")>=0||$.indexOf("-p.lazada.")>=0||$.indexOf("pre-wormhole.")>=0||$.indexOf("pre.lazada.")>=0||$.indexOf("pre-www.lazada.")>=0||$.indexOf("pre-wallet-nav.lazada.")>=0||$.indexOf("-staging.lazada.")>=0)||!U.iTraceDebug),Z={en:"Network error, please try again later",id:"Kesalahan jaringan, coba lagi nanti",ms:"Ralat rangkaian, sila cuba lagi kemudian",my:"ကွန်ယက်ကိုအမှား, နောက်မှာထပ်ကြိုးစားကြည့်ပါ",th:"ข้อผิดพลาดของเครือข่ายโปรดลองอีกครั้งในภายหลัง",vi:"Lỗi mạng, vui lòng thử lại sau",bn:"নেটওয়ার্ক ত্রুটি, দয়া করে পরে আবার চেষ্টা করুন",si:"ජාල දෝෂය, නැවත උත්සාහ කරන්න",ne:"सञ्जाल त्रुटि, कृपया पछि फेरि प्रयास गर्नुहोस्",ur:"نیٹ ورک کی غلطی، براہ کرم بعد میں دوبارہ کوشش کریں"};function ee(){var e=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t="",n="",o=m(u("hng"));if("object"===("undefined"==typeof window?"undefined":a(window))&&window._i18n_){var r=window._i18n_;if("string"==typeof r)try{r=JSON.parse(r)}catch(e){}"object"===a(r)&&(t=r.regionID,n=r.language)}if(!t&&window.g_config&&"object"===a(window.g_config)&&(t=window.g_config.regionID,n=window.g_config.language),!t&&"object"===("undefined"==typeof location?"undefined":a(location))&&location.hostname){for(var i in p){var c=p[i];if(c&&c.domain&&location.hostname.indexOf(c.domain)>-1){t=c.regionID;break}}o.length>1&&(n=o[1])}return t||o.length>=4&&(t=o[0],n=o[1]),n=h(t=w.wh_regionID||t||"SG",n)||"en",e&&(n=n.substring(0,2)),{regionID:t.toLocaleUpperCase(),language:n}}(),t=e.language;return Z[(void 0===t?"EN":t).toLowerCase()]||Z.en}function te(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(e.split("\r\n"));try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o.indexOf("x-eagleeye-id")>-1){var r=o.split(":");return r[1]?r[1]:""}}}catch(e){n.e(e)}finally{n.f()}return""}function ne(e){var t=(window.lzdiTraceLifeCircle||{}).lzdiTraceBeforeSend;try{return e&&t&&"function"==typeof t&&(e=t(e)),e}catch(t){return console.error("iTrace sdk beforeSend Format function execute error",t),e}}var oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.pid){var t=null;return window.__wpk?(e.pid&&(e.bid=e.pid,delete e.pid),window.__wpk.setConfig(e),t=window.__wpk):(K&&z&&F?(t=new o.default({bid:e.pid,cid:e.cid||"",uid:H,utdid:q,rel:e.rel||G,cluster:"intl",plugins:[[E,{enable:!1}]],debug:e.isDebug||Q,beforeSend:ne})).install():((t=new o.default({bid:e.pid,cid:e.cid||"",uid:H,utdid:q,rel:e.rel||G,cluster:"intl",plugins:[[S,{enable:!1}]],debug:e.isDebug||Q,beforeSend:ne})).installAll(),re()),window.__wpk=t),console.log("lzd-h5-itrace version: v".concat(G)),t}console.warn("[lzd-h5-itrace] 实例化失败，缺少必要参数")},re=function(){F||document.addEventListener("DOMContentLoaded",(function(){__wpk.addPlugin(I,{rootNode:document.getElementById("container")||document.getElementById("root")})}))},ie=function(e,t,n,o,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},c=window.__wpk;window.__wpk?C.some((function(t){return t.test(e)}))||c.reportApiError(i({msg:r,url:e,method:t,status:o,spent:n,response:o},a),{}):console.warn("[lzd-h5-itrace] 请先调用 iLoggerIntegrate 方法进行初始化，再调用这个方法")},ae=function(e){if(!V){var t=function(e){var t=e.name,n=e.duration,o=void 0===n?0:n,r=e.decodedBodySize,i=void 0===r?0:r,a=e.encodedBodySize,c=void 0===a?0:a,l=e.transferSize,s=void 0===l?0:l;try{var d=new URL(t);window.__wpk.report({category:202,msg:d.hostname,wl_avgv1:o.toFixed(2),wl_avgv2:i,wl_avgv3:c,wl_avgv4:s,c1:t,bl5:JSON.stringify(e),sampleRate:.01})}catch(e){}},n=function(e){var n=function(e){var t,n=new URL(e.name);return"https:"!==n.protocol&&"http:"!==n.protocol||"img"!==e.initiatorType||(t=n.hostname).includes("member.lazada.")||t.includes("my.lazada.")||t.includes("www.lazada.")||t.includes("pages.lazada.")||t.includes("c.lazada.")||t.includes("www.google.")||t.includes("translate.google.")||t.includes("criteo.net")||t.includes("doubleclick.net")||t.includes("googleadservices")||t.includes("cnzz.com")||t.includes("log.aliyuncs.com")||t.includes("mmstat.")||t.includes("clarity")||t.includes("ucweb.com")||t.includes("googleapis")||-1!==["graph.facebook.com","connect.facebook.net","csi.gstatic.com","airunit.taobao.com","acjs.aliyun.com","whos.amung.us","kcart.alipay.com","www.google-analytics.com","px-intl.ucweb.com","www.googletagmanager.com","googleads.g.doubleclick.net","www.facebook.com","gm.mmstat.com","sg.mmstat.com","bat.bing.com","cm.everesttech.net","pixel.everesttech.net","retcode-sg-lazada.arms.aliyuncs.com","fourier.taobao.com","pixel.tapad.com","secure.adnxs.com","s-cs.send.microad.jp","cs.adingo.jp"].indexOf(t)?null:e}(e);n&&(window.requestIdleCallback?window.requestIdleCallback((function(){t(n)})):setTimeout((function(){t(n)}),0))};if(V=!0,window.__wpk||oe(e),console.log("[lzd-h5-itrace] init images perf monitor"),window.performance&&window.PerformanceObserver)window.performance.getEntriesByType("resource").forEach((function(e){n(e)})),new PerformanceObserver((function(e){e.getEntries().forEach((function(e){n(e)}))})).observe({entryTypes:["resource"]})}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};J||(J=!0,window.__wpk||oe(e),_.install(),_.onReport((function(t,n,o){if(console.log("[fsp-report]",t,n,o,window.preLoadTime),window.__lzd_fsp_done=!0,window.__wpk&&window.__wpk.report){var r=Math.floor(n)-Math.floor(window.preLoadTime||0);if(r>0&&r<2e4){var i=e.msg||"自定义首屏";i=k(i),window.__wpk.report({category:e.category||200,msg:i,wl_avgv1:r,c1:r,c2:n,c3:window.preLoadTime||"-"});var a=(window.lzdiTraceLifeCircle||{}).lzdiTraceShareFspTime;"function"==typeof a&&a({fspTime:r,preLoadTime:window.preLoadTime,url:location.href})}else{var c=r<0?"负值":"极大值 (>20s)";window.__wpk.report({category:e.category||200,msg:"".concat(c),c1:r,c2:n,c3:window.preLoadTime||"-"})}}})))},le=function(e){var t;W||(window.__wpk||oe(e),window,(t=window.lib||(window.lib={}))&&t.mtop&&!t.mtop.ERROR?(t.mtop.middlewares.push((function(e){var t=this.params,n=this.options,o=n.querystring,r=parseInt((void 0===o?{}:o).t)||Date.now();return e().then((function(){var e,o,i,a="",c=n.retJson,l=void 0===c?{}:c,s=n.path,d=n.prefix,u=n.subDomain,p=n.pageDomain,f=(n.results[0]||{}).stat,g=void 0===f?{}:f,w=l.responseHeaders,m=void 0===w?"":w,h=l.ret,v=te(m),y=function(e){var t=e&&e.length&&e[0].split("::");return-1!==e[0].indexOf("FAIL_SYS")||-1!==e[0].indexOf("SYSTEM_ERROR")||-1!==e[0].indexOf("UNKNOWN_FAIL_CODE")||-1!==e[0].indexOf("TIMEOUT")?{key:t[0],displayMessage:ee()}:t&&t[1]?{key:t[0],displayMessage:t[1]}:{key:e[0],displayMessage:ee()}}(h),_=y.displayMessage,b=t.type||"",T=l.v||t.v||"",O=t["x-i18n-regionID"]||"-",E=M[O.toUpperCase()]||O,x=l.api||t.api||"";x=x.toLowerCase(),e=t.ext_headers&&t.ext_headers["x-uid"]||"",i=A.includes(y.key)?200:0,o=g.oneWayTime||Date.now()-r,a=s?"https:".concat(s):u&&p?"https://".concat(d?d+".":"").concat(u,".").concat(p,"/gw/").concat(x,"/").concat(T):"https://".concat(E,"/gw/").concat(x,"/").concat(T),ie(a,b,o,i,y.key,{c1:e,c2:v,c3:_})}))})),W=!0,console.log("[lzd-h5-itrace] mtop itrace plugin init success!")):console.warn("[lzd-h5-itrace] Mtop 没有初始化，无法添加 Mtop Itrace 监控插件！请参考 Mtop 文档 http://gitlab.alibaba-inc.com/mtb/lib-mtop ",t))};!function(){if(window){window.addEventListener("oniLoggerMtopPluginInit",(function(e){le(e.detail)}),!1);var e=!0;if(window.lib?window.lib.mtop&&(e=!1):window.lib={},e&&Object.defineProperty(window.lib,"mtop",{get:function(){return window.__lzdlib_mtop__},set:function(e){window.__lzdlib_mtop__=e,Object.defineProperty(window.lib.mtop,"middlewares",{get:function(){return window.__lzdlib_mtop_middlewares__},set:function(e){var t=new CustomEvent("oniLoggerMtopPluginInit",{detail:B||{}});window.__lzdlib_mtop_middlewares__=e,window.dispatchEvent(t)},configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0}),X){var t={selfDefineFSP:!0,mtopPluginInit:!0,imagesPerf:!0,assetPerf:!0,didMountTimeReport:!0},n=document.head.querySelector('meta[name="lzd-itrace-close-auto-monitor"]');if(n&&n.getAttribute("content"))n.getAttribute("content").split(",").forEach((function(e){var n=e.trim();t[n]=!1}));oe({pid:X}),t.selfDefineFSP?ce({pid:X}):console.log("[lzd-h5-itrace] close auto run selDefineFSP"),t.imagesPerf?ae({pid:X}):console.log("[lzd-h5-itrace] close auto run iLoggerImagesPerf"),t.assetPerf?T():console.log("[lzd-h5-itrace] close auto run iLoggerAssetPerf"),window.lib&&window.lib.mtop&&t.mtopPluginInit?le({pid:X}):console.log("[lzd-h5-itrace] close auto run mtopPluginInit"),t.didMountTimeReport?D():console.log("[lzd-h5-itrace] disable didMountTimeReport")}}}(),e.iLoggerInit=oe,e.iLoggerIntegrate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";try{t=oe(e)}catch(e){console.log("[lzd-h5-itrace] catch iTrace sdk error, make program go on!")}return ce(e),ae(e),T(),D(),B=e,le(e),t},e.iLoggerMtopPluginInit=le,e.iLoggerReportApi=ie,e.iLoggerSelfDefineFSP=ce,Object.defineProperty(e,"__esModule",{value:!0})}));
